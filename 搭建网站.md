# 服务器

## 服务器选购

很多学生优惠，可以去看看

### 云服务器

阿里云，腾讯云，雨云（便宜点，但性能没有前两家好）

包年包月

**选地区（香港最方便）**
* 大陆地区：最快，但需要备案
* 香港：不用备案，但上防御比较麻烦
* 国外：相对国内较慢（中东，德国就别买了，延迟太高），有时候也可能被墙

网络及可用区：vpc即可

**选cpu：**

只做代理，展示个静态页面：1核就行

有后端的：2核

内存：0.5GiB就够了

架构：X86计算（比较成熟，问题好解决）

弹性裸金属服务器是啥意思：一台真正的物理机，不是虚拟划分来的（贵，买不起）

突发性能实例和共享基本型的选择无所谓，挑便宜的（学习用途不用讲究那么多）

**镜像**

安装到服务器上的系统：

* 选Linux（Ubuntu，CentOS Stream这些比较流行的就可以），别选Windows（臃肿，不方便）
* 最好不要选最新的（有问题都找不到解答）

**系统盘：**

高效云盘：其实就是机械硬盘，虽然慢点，但学习来说够用了

SSD云盘：更快，但贵

容量：20Gib就够用了

IOPS：读写性能

数据盘，快照服务：学习阶段用不到，不用管

**宽带**

公网IP：必须要有

线路类型：按便宜的选就行

宽带计费模式：**选择按固定宽带，千万不要按流量计费（虽然配置费用低，但如果有人恶意刷流量，会产生极大的费用）**

宽带值：要挂前端需要5Mbps以上，只是挂后端的话1Mbps就可以


### 轻量级应用服务器

更方便，很多都已经捆绑配置好了，而且价格比云服务器低

**需要注意：它是按流量计费的**

配置参照云服务器就可以

## 服务器基础配置

公网IP：访问网站用的IP

内网IP：同一地区两台服务器之间通信（比如说分布式项目），不计流量，速度快

### 本地连接服务器

步骤如下：

① 服务器那边，通过控制台，远程连接

为了本地能够连上，需要创建一个用户（用户名test为例）

```
//创建test用户
sudo useradd test -m -s /bin/bash
//给test用户设置密码
sudo passwd test
```

![](img/%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7.png)

然后给这个用户授予超级管理员的权限

```
sudo vim /etc/sudoers
```

![](img/%E7%BC%96%E8%BE%91%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90.png)

![](img/%E4%B8%BAtest%E7%94%A8%E6%88%B7%E6%8E%88%E4%BA%88%E8%B6%85%E7%BA%A7%E7%AE%A1%E7%90%86%E5%91%98%E6%9D%83%E9%99%90.png)

② 本地cmd中，用ssh连接到服务器（用服务器的公网IP）

```
ssh test@服务器公网ip
```

![](img/%E6%9C%AC%E5%9C%B0%E9%80%9A%E8%BF%87ssh%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%99%A8.png)

本地成功连接上服务器后，就可以在本地操作服务器了，远程连接没用了，关掉

### 给服务器装环境

将前后端分离项目放在服务器上一般采用的方案：

* 服务器上跑一个java环境
* 用一个反向代理的服务器挂前端（这里使用nginx反向代理）

装环境：

① 本地成功连接上服务器后，更新软件源

```
sudo apt update
```

② 给服务器安装java环境

```
//看以下用哪些版本可以选
sudo apt install openjdk-
//因为不用在服务器上开发，只是跑项目而已，所以下载jre就可以了
sudo apt install openjdk-17-jre
//查看下载的版本
java -version
```

③ 安装nginx

```
sudo apt install nginx
//查看nginx服务有没有启动
sudo systemctl status nginx
```

安装nginx后，就可以在浏览器通过服务器的公网ip访问到了

```
//可以去编辑访问的页面
sudo vim /var/www/html/index.nginx-debian.html
//重新加载nginx服务
sudo systemctl reload nginx
```




